<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

	<extension-point id="org.eclipse.agents.modelContextProtocolServer"
		name="Model Context Protocol Server"
		schema="schema/modelContextProtocolServer.exsd" />

	<extension point="org.eclipse.ui.keywords">
		<keyword label="MCP"
			id="org.eclipse.mcp.keyword.mcp" />
		<keyword label="ACP"
			id="org.eclipse.mcp.keyword.acp" />
		<keyword label="MODEL"
			id="org.eclipse.mcp.keyword.model" />
		<keyword label="CONTEXT"
			id="org.eclipse.mcp.keyword.agent" />
		<keyword label="AGENT"
			id="org.eclipse.mcp.keyword.client" />
		<keyword label="CLIENT"
			id="org.eclipse.mcp.keyword.context" />
		<keyword label="PROTOCOL"
			id="org.eclipse.mcp.keyword.protocol" />
		<keyword label="CODING"
			id="org.eclipse.mcp.keyword.coding" />
		<keyword label="CLI"
			id="org.eclipse.mcp.keyword.cli" />
	</extension>

	<extension point="org.eclipse.ui.activities">
		<category id="org.eclipse.mcp.activity"
			description="Connect Agentic clients to Model Context Protocol servers running within the workbench"
			name="Agent Context Services" />
	</extension>
	
	<extension
          point="org.eclipse.mcp.modelContextProtocolServer"
          id="org.eclipse.mcp.platform"
          name="Eclipse Platform Services">
       <contributor
             id="org.eclipse.mcp.platform.contributor"
             name="Eclipse Platform Services"
             description="Eclipse Platform Services for Files, Editors, Consoles and Markers"
             provider="Eclipse"
             activityId="org.eclipse.mcp.platform">
          <factory class="org.eclipse.mcp.platform.FactoryProvider"/>
       </contributor>
    </extension>
    
     <extension point="org.eclipse.ui.activities">
   
       <activity id="org.eclipse.mcp.platform" 
           description="Services for Editors, Files, Consoles, Problems and Tasks"
           name="Eclipse Platform Contexts" />
   
       <categoryActivityBinding activityId="org.eclipse.mcp.platform"
           categoryId="org.eclipse.mcp.activity" />
    
       <defaultEnablement id="org.eclipse.mcp.platform" />
     </extension>

	<extension point="org.eclipse.ui.preferencePages">
		<page
			id="org.eclipse.agents.preferences.general"
			class="org.eclipse.agents.internal.preferences.AgentGeneralPreferencePage"
			name="Coding Agents">
			<keywordReference id="org.eclipse.mcp.keyword.mcp" />
			<keywordReference id="org.eclipse.mcp.keyword.acp" />
			<keywordReference id="org.eclipse.mcp.keyword.model" />
			<keywordReference id="org.eclipse.mcp.keyword.agent" />
			<keywordReference id="org.eclipse.mcp.keyword.client" />
			<keywordReference id="org.eclipse.mcp.keyword.context" />
			<keywordReference id="org.eclipse.mcp.keyword.protocol" />
			<keywordReference id="org.eclipse.mcp.keyword.coding" />
		</page>
		<page
			id="org.eclipse.mcp.preferences.general"
			name="Agent Contexts"
			category="org.eclipse.agents.preferences.general"
			class="org.eclipse.agents.internal.preferences.McpGeneralPreferencePage">
			<keywordReference id="org.eclipse.mcp.keyword.mcp" />
			<keywordReference id="org.eclipse.mcp.keyword.acp" />
			<keywordReference id="org.eclipse.mcp.keyword.model" />
			<keywordReference id="org.eclipse.mcp.keyword.agent" />
			<keywordReference id="org.eclipse.mcp.keyword.client" />
			<keywordReference id="org.eclipse.mcp.keyword.context" />
			<keywordReference id="org.eclipse.mcp.keyword.protocol" />
			<keywordReference id="org.eclipse.mcp.keyword.coding" />
		</page>
		<page
			id="org.eclipse.acp.preferences.general"
			name="Agent CLIs"
			category="org.eclipse.agents.preferences.general"
			class="org.eclipse.agents.internal.preferences.AcpGeneralPreferencePage">
			<keywordReference id="org.eclipse.mcp.keyword.mcp" />
			<keywordReference id="org.eclipse.mcp.keyword.acp" />
			<keywordReference id="org.eclipse.mcp.keyword.model" />
			<keywordReference id="org.eclipse.mcp.keyword.agent" />
			<keywordReference id="org.eclipse.mcp.keyword.client" />
			<keywordReference id="org.eclipse.mcp.keyword.context" />
			<keywordReference id="org.eclipse.mcp.keyword.protocol" />
			<keywordReference id="org.eclipse.mcp.keyword.coding" />
			<keywordReference id="org.eclipse.mcp.keyword.cli" />
		</page>
	</extension>

	<extension point="org.eclipse.core.runtime.preferences">
		<initializer
			class="org.eclipse.agents.internal.preferences.PreferenceInitializer" />
	</extension>

	<extension point="org.eclipse.ui.startup">
		<startup class="org.eclipse.agents.internal.Startup" />
	</extension>

	<extension point="org.eclipse.ui.trace.traceComponents">
		<component
			id="org.eclipse.mcp.traceComponent"
			label="Coding Agent Services">
			<bundle
				name="org.eclipse.mcp">
			</bundle>
		</component>
	</extension>
	
	<extension point="org.eclipse.ui.views">
      <view id="org.eclipse.mcp.acp.view.AcpView" name="Coding Agent" class="org.eclipse.agents.acp.view.AcpView" icon="icons/templates.png" />
   </extension>
	
	 <extension point="org.eclipse.ui.menus">
      <menuContribution locationURI="popup:org.eclipse.ui.navigator.ProjectExplorer#PopupMenu?after=additions">
         <command commandId="org.eclipse.mcp.acp.cmd.addToChat" tooltip="Add to Chat"/>
      </menuContribution>
   </extension>
   

   <extension point="org.eclipse.ui.commands">
      <category description="Chat with coding agents" id="org.eclipse.mcp.acp.cmd.category" name="Coding Agents" />
      <command name="Add to chat" description="Add to chat" categoryId="org.eclipse.mcp.acp.cmd.category" defaultHandler="org.eclipse.agents.acp.view.CommandHandler" id="org.eclipse.mcp.acp.cmd.addToChat" />
   </extension>

   <!--extension point="org.eclipse.ui.commandImages">
      <image commandId="org.eclipse.mcp.acp.cmd.model" icon="icons/new_template.png"/>
      <image commandId="org.eclipse.mcp.acp.cmd.mode" icon="icons/template_obj.png" />
   </extension-->

   <extension point="org.eclipse.ui.bindings">
      <key sequence="M1+M3+M 1" commandId="org.eclipse.mcp.acp.cmd.addToChat" schemeId="org.eclipse.ui.defaultAcceleratorConfiguration" contextId="org.eclipse.mcp.acp.AcpView"/>
   </extension>
</plugin>
